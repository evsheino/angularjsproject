<h2>{{ owner.name }}</h2>

<p class="alert alert-danger" ng-show="err">{{err}}</p>

<div class="table-responsive">
  <table class="table table-hover table-condensed">
    <th>Tyyppi</th>
    <th>Nimi</th>
    <th>Tekijä</th>
    <th>Huomio</th>
    <th>Hankkija</th>
    <th>Kommentti</th>
    <th></th>
    <tr ng-repeat="wish in joined">
      <td>
        {{ wish.type }}
      </td>
      <td>
        {{ wish.name }}
      </td>
      <td>
        {{ wish.author }}
      </td>
      <td>
        {{ wish.note }}
      </td>
      <td ng-if="wish.buyerName">
        {{ wish.buyerName }}
      </td>
      <td ng-if="!wish.buyerName && !formVisible">
      </td>
      <td ng-if="wish.buyerName">
        {{ wish.comment }}
      </td>
      <td ng-if="!wish.buyerName && !formVisible">
      </td>
      <td ng-show="formVisible && !wish.buyerName" colspan=3>
        <form>
          <div class="form-group">
            <input class="form-control" placeholder="Huomio" ng-model="purchase.comment"/>
          </div>
          <button class="btn btn-primary" type="submit" ng-click="addPurchase(purchase, wish.$id)">Hankittu</button>
          <button ng-show="formVisible && !wish.buyerName" class="btn btn-primary" ng-click="formVisible = !formVisible">Peruuta</button>
        </form>
      </td>
      <td ng-show="wish.buyerName" >
        <button class="btn btn-danger" ng-click="deletePurchase(wish.$id)">X</button>
      </td>
      <td ng-show="!wish.buyerName && !formVisible" >
        <button class="btn btn-primary" ng-click="formVisible = !formVisible">Lisää</button>
      </td>
    </tr>
  </table>
</div>
